#!/bin/bash
# Job Name and Files (also --job-name)
#SBATCH -J heat
#Output and error (also --output, --error):
#SBATCH -o job_kmp.out
#SBATCH -e job_kmp.out
# Wall clock limit:
#SBATCH --time=00:30:00
#SBATCH --account=h039v
#SBATCH --partition=test

./heat test.dat
./heat test.dat
./heat test.dat
./heat test.dat
./heat test.dat


thread_nums=(1 2 4 8 12 16 24 32 48)
for t in "${thread_nums[@]}"
do
	export OMP_NUM_THREADS=$t
	export KMP_AFFINITY=compact,verbose
	./heat test.dat
done

